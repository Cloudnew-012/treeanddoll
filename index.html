<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‹‰è´å°”çš„åœ£è¯æ ‘</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", sans-serif;
        }

        body {
            background-color: #33649A; /* åº•è‰² */
            overflow-x: hidden; /* é˜²æ­¢æ¨ªå‘æ»šåŠ¨ */
            position: relative; /* ä¸ºå…¨å±€è½é›ªåšå‡†å¤‡ */
            min-height: 100vh;
        }

        /* é¡µé¢æ ‡é¢˜æ ·å¼ */
        .page-title {
            text-align: center;
            padding: 20px 0;
            color: #FDD9B7;
        }

        .page-title h1 {
            font-size: 28px;
            margin-bottom: 8px;
        }

        .page-title p {
            font-size: 14px;
            color: #FDD9B7;
        }

        /* æ ¸å¿ƒå¸ƒå±€å®¹å™¨ */
        .main-container {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 30px;
            padding: 0 20px 40px;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* å·¦ä¾§æŒ‰é’®åŒºåŸŸ */
        .btn-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }

        .control-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .reset-btn {
            background-color: #D04D16;
            color: #FDD9B7;
        }


        .random-btn {
            background-color: #D04D16;
            color: #FDD9B7;
        }

        .control-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        /* åœ£è¯æ ‘å®¹å™¨ - ä»…åŒ…è£¹æ ‘æœ¬èº« */
        .tree-container {
            flex: 0 0 auto; /* ä¸è‡ªåŠ¨ä¼¸ç¼© */
            position: relative; /* æ‰¿è½½è£…é¥°æŒ‚ä»¶ */
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            margin-top: 20px;
        }

        .tree-img {
            max-width: 350px; /* æ ‘çš„åŸºç¡€å®½åº¦ï¼Œå¯æ ¹æ®éœ€æ±‚è°ƒæ•´ */
            height: auto;
            display: block;
        }

        /* å³ä¾§è£…é¥°æŒ‚ä»¶åº“ */
        .decor-library {
            width: 300px;
            background-color: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            max-height: 600px;
            overflow-y: auto;
            margin-top: 20px;
        }

        .decor-library h3 {
            color: #33649A;
            font-size: 16px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .decor-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .decor-item {
            width: 100%;
            aspect-ratio: 1/1;
            cursor: move;
            border-radius: 6px;
            overflow: hidden;
            border: 1px solid #eee;
            transition: all 0.2s ease;
        }

        .decor-item:hover {
            transform: scale(1.05);
            border-color: #33649A;
        }

        .decor-item img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        /* ä½¿ç”¨æç¤ºæ ·å¼ */
        .usage-tips {
            margin-top: 15px;
            padding: 10px;
            background-color: #F5F5F5;
            border-radius: 6px;
            font-size: 12px;
            color: #666;
        }

        .usage-tips h4 {
            font-size: 13px;
            margin-bottom: 5px;
            color: #333;
        }

        .usage-tips ul {
            padding-left: 20px;
            line-height: 1.5;
        }

        /* å…¨å±€è½é›ªç‰¹æ•ˆæ ·å¼ */
        .snowflake {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            pointer-events: none; /* ä¸å½±å“äº¤äº’ */
            opacity: 0.8;
            animation: snowfall linear infinite;
        }

        @keyframes snowfall {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* å“åº”å¼é€‚é… */
        @media (max-width: 900px) {
            .main-container {
                flex-direction: column;
                align-items: center;
            }

            .btn-group {
                flex-direction: row;
                justify-content: center;
                flex-wrap: wrap;
            }

            .decor-library {
                width: 100%;
                max-width: 400px;
            }
        }
    </style>
</head>
<body>
    <!-- é¡µé¢æ ‡é¢˜ -->
    <div class="page-title">
        <h1>ğŸ„ å±äºä½ çš„åœ£è¯æ ‘ ğŸ„</h1>
        <p>æŠŠå¨ƒå¨ƒæŒ‚åˆ°æ ‘ä¸Šå§â‚á¢..á¢â‚â™¡</p>
    </div>

    <!-- æ ¸å¿ƒå¸ƒå±€ -->
    <div class="main-container">
        <!-- å·¦ä¾§åŠŸèƒ½æŒ‰é’® -->
        <div class="btn-group">
            <button class="control-btn reset-btn">é‡ç½®è£…é¥°</button>
            <button class="control-btn random-btn">éšæœºè£…é¥°</button>
        </div>

        <!-- ä¸­é—´åœ£è¯æ ‘å®¹å™¨ -->
        <div class="tree-container" id="treeContainer">
            <img src="./images/tree1.png" alt="åœ£è¯æ ‘" class="tree-img">
            <!-- è£…é¥°æŒ‚ä»¶ä¼šé€šè¿‡JSåŠ¨æ€æ·»åŠ åˆ°è¿™é‡Œ -->
        </div>

        <!-- å³ä¾§è£…é¥°æŒ‚ä»¶åº“ -->
        <div class="decor-library">
            <h3>ğŸ„ å¨ƒå¨ƒä»¬</h3>
            <div class="decor-grid" id="decorGrid">
                <!-- ç¤ºä¾‹æŒ‚ä»¶ï¼Œå®é™…éœ€æ›¿æ¢ä¸ºçœŸå®å›¾ç‰‡è·¯å¾„ -->
                <div class="decor-item" draggable="true" data-id="1">
                    <img src="./images/doll0.png" alt="è£…é¥°1">
                </div>
                <div class="decor-item" draggable="true" data-id="2">
                    <img src="./images/doll1.png" alt="è£…é¥°2">
                </div>
                <div class="decor-item" draggable="true" data-id="3">
                    <img src="./images/doll2.png" alt="è£…é¥°3">
                </div>
                <div class="decor-item" draggable="true" data-id="4">
                    <img src="./images/doll3.png" alt="è£…é¥°4">
                </div>
                <div class="decor-item" draggable="true" data-id="5">
                    <img src="./images/doll4.png" alt="è£…é¥°5">
                </div>
                <div class="decor-item" draggable="true" data-id="6">
                    <img src="./images/doll5.png" alt="è£…é¥°6">
                </div>
                <div class="decor-item" draggable="true" data-id="7">
                    <img src="./images/doll6.png" alt="è£…é¥°7">
                </div>
                <div class="decor-item" draggable="true" data-id="8">
                    <img src="./images/doll7.png" alt="è£…é¥°8">
                </div>
                <div class="decor-item" draggable="true" data-id="9">
                    <img src="./images/doll8.png" alt="è£…é¥°9">
                </div>
                <div class="decor-item" draggable="true" data-id="10">
                    <img src="./images/doll9.png" alt="è£…é¥°10">
                </div>
                <div class="decor-item" draggable="true" data-id="11">
                    <img src="./images/doll10.png" alt="è£…é¥°11">
                </div>
                 <div class="decor-item" draggable="true" data-id="12">
                    <img src="./images/doll11.png" alt="è£…é¥°12">
                </div>
                <div class="decor-item" draggable="true" data-id="13">
                    <img src="./images/doll12.png" alt="è£…é¥°13">
                </div>
                <div class="decor-item" draggable="true" data-id="14">
                    <img src="./images/doll13.png" alt="è£…é¥°14">
                </div>
                <div class="decor-item" draggable="true" data-id="15">
                    <img src="./images/doll14.png" alt="è£…é¥°15">
                </div>
                <div class="decor-item" draggable="true" data-id="16">
                    <img src="./images/doll15.png" alt="è£…é¥°16">
                </div>
                <div class="decor-item" draggable="true" data-id="17">
                    <img src="./images/doll16.png" alt="è£…é¥°17">
                </div>
                <div class="decor-item" draggable="true" data-id="18">
                    <img src="./images/doll17.png" alt="è£…é¥°18">
                </div>
                <div class="decor-item" draggable="true" data-id="19">
                    <img src="./images/doll18.png" alt="è£…é¥°19">
                </div>
                <div class="decor-item" draggable="true" data-id="20">
                    <img src="./images/doll19.png" alt="è£…é¥°20">
                </div>
                <div class="decor-item" draggable="true" data-id="21">
                    <img src="./images/doll20.png" alt="è£…é¥°21">
                </div>
                 <div class="decor-item" draggable="true" data-id="22">
                    <img src="./images/doll21.png" alt="è£…é¥°22">
                </div>
                <div class="decor-item" draggable="true" data-id="23">
                    <img src="./images/doll22.png" alt="è£…é¥°23">
                </div>
                <div class="decor-item" draggable="true" data-id="24">
                    <img src="./images/doll23.png" alt="è£…é¥°24">
                </div>
                <div class="decor-item" draggable="true" data-id="25">
                    <img src="./images/doll24.png" alt="è£…é¥°25">
                </div>
                <div class="decor-item" draggable="true" data-id="26">
                    <img src="./images/doll25.png" alt="è£…é¥°26">
                </div>
                <div class="decor-item" draggable="true" data-id="27">
                    <img src="./images/doll26.png" alt="è£…é¥°27">
                </div>
            </div>

            <!-- ä½¿ç”¨æç¤º -->
            <div class="usage-tips">
                <h4>ä½¿ç”¨æç¤º</h4>
                <ul>
                    <li>ç‚¹å‡»/æ‹–åŠ¨æŒ‚ä»¶åˆ°åœ£è¯æ ‘ä¸Š</li>
                    <li>æ‹–åŠ¨æŒ‚ä»¶å¯è°ƒæ•´ä½ç½®</li>
                    <li>åŒå‡»æŒ‚ä»¶å¯åˆ é™¤</li>
                    <li>æ»šè½®å¯ç¼©æ”¾æŒ‚ä»¶å¤§å°</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // 1. æ‹–æ‹½åŠŸèƒ½æ ¸å¿ƒé€»è¾‘ï¼ˆç®€åŒ–ç‰ˆï¼Œä¿ç•™åŸºç¡€äº¤äº’ï¼‰
        const decorItems = document.querySelectorAll('.decor-item');
        const treeContainer = document.getElementById('treeContainer');

        decorItems.forEach(item => {
            // å¼€å§‹æ‹–æ‹½
            item.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('text/plain', item.dataset.id);
                e.dataTransfer.setDragImage(item.querySelector('img'), 20, 20);
            });
        });

        // æ‹–æ”¾è‡³åœ£è¯æ ‘å®¹å™¨
        treeContainer.addEventListener('dragover', (e) => {
            e.preventDefault(); // å…è®¸æ”¾ç½®
        });

        treeContainer.addEventListener('drop', (e) => {
            e.preventDefault();
            const decorId = e.dataTransfer.getData('text/plain');
            const decorSrc = document.querySelector(`.decor-item[data-id="${decorId}"] img`).src;
            
            // åˆ›å»ºå¯äº¤äº’çš„è£…é¥°å…ƒç´ 
            const newDecor = document.createElement('div');
            newDecor.className = 'dragged-decor';
            newDecor.style.position = 'absolute';
            newDecor.style.width = '50px';
            newDecor.style.height = '50px';
            newDecor.style.left = `${e.offsetX - 25}px`;
            newDecor.style.top = `${e.offsetY - 25}px`;
            newDecor.style.cursor = 'move';
            newDecor.innerHTML = `<img src="${decorSrc}" style="width:100%;height:100%;object-fit:contain;">`;
            
            // åŒå‡»åˆ é™¤
            newDecor.addEventListener('dblclick', () => newDecor.remove());
            
            // æ‹–åŠ¨è°ƒæ•´ä½ç½®
            newDecor.addEventListener('mousedown', (e) => {
                const startX = e.clientX;
                const startY = e.clientY;
                const startLeft = parseFloat(newDecor.style.left);
                const startTop = parseFloat(newDecor.style.top);

                const moveHandler = (e) => {
                    newDecor.style.left = `${startLeft + (e.clientX - startX)}px`;
                    newDecor.style.top = `${startTop + (e.clientY - startY)}px`;
                };

                const upHandler = () => {
                    document.removeEventListener('mousemove', moveHandler);
                    document.removeEventListener('mouseup', upHandler);
                };

                document.addEventListener('mousemove', moveHandler);
                document.addEventListener('mouseup', upHandler);
            });

            // æ»šè½®ç¼©æ”¾
            newDecor.addEventListener('wheel', (e) => {
                e.preventDefault();
                let currentWidth = parseFloat(newDecor.style.width);
                const newWidth = e.deltaY < 0 ? currentWidth + 5 : currentWidth - 5;
                if (newWidth >= 20 && newWidth <= 100) { // é™åˆ¶ç¼©æ”¾èŒƒå›´
                    newDecor.style.width = `${newWidth}px`;
                    newDecor.style.height = `${newWidth}px`;
                }
            });

            treeContainer.appendChild(newDecor);
        });

        // 2. é‡ç½®è£…é¥°åŠŸèƒ½
        document.querySelector('.reset-btn').addEventListener('click', () => {
            const allDecor = treeContainer.querySelectorAll('.dragged-decor');
            allDecor.forEach(decor => decor.remove());
        });

        // 3. éšæœºè£…é¥°åŠŸèƒ½ï¼ˆç®€åŒ–ç‰ˆï¼‰
        document.querySelector('.random-btn').addEventListener('click', () => {
            // å…ˆé‡ç½®
            document.querySelector('.reset-btn').click();
            // éšæœºæ·»åŠ 3-6ä¸ªè£…é¥°
            const decorCount = Math.floor(Math.random() * 4) + 3;
            const treeRect = treeContainer.getBoundingClientRect();
            const decorIds = ['1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27'];

            for (let i = 0; i < decorCount; i++) {
                const randomId = decorIds[Math.floor(Math.random() * decorIds.length)];
                const decorSrc = document.querySelector(`.decor-item[data-id="${randomId}"] img`).src;
                
                const newDecor = document.createElement('div');
                newDecor.className = 'dragged-decor';
                newDecor.style.position = 'absolute';
                newDecor.style.width = `${Math.random() * 30 + 40}px`;
                newDecor.style.height = newDecor.style.width;
                newDecor.style.left = `${Math.random() * (treeRect.width - 60) + 30}px`;
                newDecor.style.top = `${Math.random() * (treeRect.height - 60) + 30}px`;
                newDecor.style.cursor = 'move';
                newDecor.innerHTML = `<img src="${decorSrc}" style="width:100%;height:100%;object-fit:contain;">`;
                
                // ç»‘å®šäº¤äº’äº‹ä»¶ï¼ˆåŒæ‹–æ‹½é€»è¾‘ï¼‰
                newDecor.addEventListener('dblclick', () => newDecor.remove());
                newDecor.addEventListener('mousedown', (e) => {
                    const startX = e.clientX;
                    const startY = e.clientY;
                    const startLeft = parseFloat(newDecor.style.left);
                    const startTop = parseFloat(newDecor.style.top);

                    const moveHandler = (e) => {
                        newDecor.style.left = `${startLeft + (e.clientX - startX)}px`;
                        newDecor.style.top = `${startTop + (e.clientY - startY)}px`;
                    };

                    const upHandler = () => {
                        document.removeEventListener('mousemove', moveHandler);
                        document.removeEventListener('mouseup', upHandler);
                    };

                    document.addEventListener('mousemove', moveHandler);
                    document.addEventListener('mouseup', upHandler);
                });
                newDecor.addEventListener('wheel', (e) => {
                    e.preventDefault();
                    let currentWidth = parseFloat(newDecor.style.width);
                    const newWidth = e.deltaY < 0 ? currentWidth + 5 : currentWidth - 5;
                    if (newWidth >= 20 && newWidth <= 100) {
                        newDecor.style.width = `${newWidth}px`;
                        newDecor.style.height = `${newWidth}px`;
                    }
                });

                treeContainer.appendChild(newDecor);
            }
        });

        

        // 5. å…¨å±€è½é›ªç‰¹æ•ˆ
        function createSnowflake() {
            const snowflake = document.createElement('div');
            snowflake.className = 'snowflake';
            
            // éšæœºå¤§å°
            const size = Math.random() * 5 + 2;
            snowflake.style.width = `${size}px`;
            snowflake.style.height = `${size}px`;
            
            // éšæœºåˆå§‹ä½ç½®
            snowflake.style.left = `${Math.random() * 100}vw`;
            snowflake.style.top = '-10px';
            
            // éšæœºåŠ¨ç”»æ—¶é•¿ï¼ˆ3-10ç§’ï¼‰
            const duration = Math.random() * 7 + 3;
            snowflake.style.animationDuration = `${duration}s`;
            
            // éšæœºåŠ¨ç”»å»¶è¿Ÿ
            snowflake.style.animationDelay = `${Math.random() * 5}s`;
            
            document.body.appendChild(snowflake);
            
            // åŠ¨ç”»ç»“æŸåç§»é™¤é›ªèŠ±
            setTimeout(() => {
                snowflake.remove();
            }, duration * 1000);
        }

        // æŒç»­åˆ›å»ºé›ªèŠ±
        setInterval(createSnowflake, 100);
    </script>
</body>

</html>
